{"version":3,"sources":["api/api.js","assets/images/default-icon.png","hoc/withAuthRedirect.jsx","redux/dialogs-reducer.js","components/News/News.module.css","components/Users/Users.module.css","assets/images/preload.gif","components/Navbar/Navbar.module.css","serviceWorker.js","components/Navbar/Navbar.jsx","components/News/News.jsx","utils/object-helpers.js","redux/users-reducer.js","components/common/Paginator/Paginator.js","components/Users/User.jsx","components/Users/Users.jsx","redux/users-selectors.js","components/Users/UsersContainer.jsx","components/Header/Header.jsx","redux/auth-reducer.js","components/Header/HeaderContainer.jsx","components/Login/Login.jsx","redux/app-reducer.js","redux/sidebar-reducer.js","redux/redux-store.js","hoc/withSuspense.jsx","App.js","index.js","components/common/FormControls/FormControls.js","components/common/Preloader/Preloader.jsx","utils/validators/validators.js","components/common/FormControls/FormControls.module.css","components/common/Paginator/Paginator.module.css","components/Header/Header.module.css","redux/profile-reducer.js"],"names":["__webpack_require__","d","__webpack_exports__","usersAPI","profileAPI","authAPI","securityAPI","axios__WEBPACK_IMPORTED_MODULE_0__","instance","axios","withCredentials","headers","API-KEY","baseURL","getUsers","currentPage","pageSize","get","concat","then","response","data","deleteUsers","id","delete","followUsers","post","getProfile","userId","console","warn","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","Content-Type","saveProfile","profile","auth","login","email","password","rememberMe","captcha","logout","getCaptchaUrl","module","exports","p","mapStateToPropsForRedirect","state","isAuth","withAuthRedirect","Component","RedirectComponent","_React$Component","Object","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","props","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_6__","to","React","connect","initialState","messagesData","message","dialogsData","name","addMessageActionCreator","type","dialogsReducer","length","undefined","action","newMessage","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","news","userPhoto","nav","item","activeLinkBagda","friends","friend","users","Boolean","window","location","hostname","match","Navbar","react_default","className","classes","react_router_dom","activeClassName","News","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","objectSpread","totalUsersCount","isFetching","followingInProgress","followSuccess","userID","unfollowSuccess","setUsers","setCurrentPage","setTotalUsersCount","totalNumber","count","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","apiMethod","actionCreator","_ref2","asyncToGenerator","regenerator_default","mark","_callee2","dispatch","wrap","_context2","prev","next","sent","resultCode","stop","_x2","usersReducer","followed","toConsumableArray","filter","Paginator","_ref","onPageChanged","totalItemsCount","_ref$portionSize","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","_useState","useState","_useState2","slicedToArray","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","styles","paginator","onClick","_cn","cn","defineProperty","selectedItems","pageNumber","e","User","user","follow","unfollow","alt","src","photos","small","disabled","some","Users","objectWithoutProperties","Paginator_Paginator","User_User","createSelector","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","_this","requestUsers","_this$props","Fragment","Preloader","components_Users_Users","compose","bind","page","_callee","_context","totalCount","_x","Header","header","captchaUrl","setAuthUserData","payload","getAuthUserData","_response$data$data","_login","_ref4","_callee4","_context4","url","getCaptchaUrlSuccess","_x4","authReducer","HeaderContainer","components_Header_Header","_ref3","_callee3","_context3","_x3","maxLength30","maxLengthCreator","LoginReduxForm","reduxForm","form","error","handleSubmit","onSubmit","createField","requiredField","Input","commonError","messages","stopSubmit","_error","react_router","initialized","appReducer","friendsList","sidebarReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","sidebar","formReducer","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","withSuspense","Suspense","fallback","DialogsContainer","lazy","ProfileContainer","App","catchAllUnhandledErrors","promiseRejectionEvent","alert","log","initializedApp","addEventListener","removeEventListener","Header_HeaderContainer","components_Navbar_Navbar","exact","path","render","Users_UsersContainer","component","components_Login_Login","AppContainer","promise","Promise","all","SamuraiJSApp","es","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister","FormControl","input","_ref$meta","meta","touched","child","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","hasError","react__WEBPACK_IMPORTED_MODULE_1___default","st","redBorder","redText","children","Textarea","restProps","assign","placeholder","validators","text","redux_form__WEBPACK_IMPORTED_MODULE_3__","validate","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_assets_images_preload_gif__WEBPACK_IMPORTED_MODULE_1__","_assets_images_preload_gif__WEBPACK_IMPORTED_MODULE_1___default","preloader","maxLength","selectedPage","postsData","likesCount","addPostActionCreator","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","setStatus","t0","file","savePhotoSuccess","_ref5","_callee5","getState","_context5","abrupt","reject","_x5","_x6","newPost","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__","C_Users_Desktop_React_React_learn_github_io_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","deleteId"],"mappings":"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","file":"static/js/main.4efe339b.chunk.js","sourcesContent":["import * as axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    headers: {\r\n        \"API-KEY\": \"6b9a45f9-791d-4772-bc1f-c5dba8f157ad\",\r\n    },\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/'\r\n})\r\n\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage, pageSize) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`).then(response => response.data);\r\n    },\r\n    deleteUsers(id) {\r\n        return instance.delete(`follow/${id}`).then(response => response.data);\r\n    },\r\n    followUsers(id) {\r\n        return instance.post(`follow/${id}`).then(response => response.data);\r\n    },\r\n    getProfile(userId) {\r\n        console.warn('Obsolete method. Use profileAPI object');\r\n        return profileAPI.getProfile(userId);\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return instance.get(`profile/` + userId).then(response => response.data);\r\n    },\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/` + userId).then(response => response.data);\r\n    },\r\n    updateStatus(status) {\r\n        return instance.put(`profile/status`, {status: status}).then(response => response.data)\r\n    },\r\n    savePhoto(photoFile) {\r\n        var formData = new FormData();\r\n        formData.append('image', photoFile);\r\n        return instance.put(`profile/photo`, formData, {headers: {'Content-Type': 'multipart/form-data'}})\r\n    },\r\n    saveProfile(profile) {\r\n        return instance.put(`profile`, profile);\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    auth() {\r\n        return instance.get(`auth/me`);\r\n    },\r\n    login(email, password, rememberMe, captcha) {\r\n        return instance.post(`auth/login`, {email, password, rememberMe, captcha});\r\n    },\r\n    logout() {\r\n        return instance.delete(`auth/login`);\r\n    }\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get(`security/get-captcha-url`);\r\n    }\r\n}","module.exports = __webpack_public_path__ + \"static/media/default-icon.464780f3.png\";","import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) return <Redirect to='/login' />\r\n            return <Component {...this.props} />\r\n        }\r\n        \r\n    }\r\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n    return ConnectedAuthRedirectComponent;\r\n}\r\n\r\n\r\n\r\n","const ADD_MESSAGE = 'ADD-MESSAGE';\r\n\r\nlet initialState = {\r\n    messagesData: [\r\n        {id: '1', message: 'I am Jack. Nice to meet you, Sandra'},\r\n        {id: '2', message: 'Glad to see you too, Jack. Are you alone at this party?'},\r\n        {id: '3', message: 'Yes, I am. My friend has fallen ill today and decided to stay at home. And you?'}\r\n      ],\r\n      dialogsData: [\r\n        {name: 'Max', id: '1'},\r\n        {name: 'Dimych', id: '2'},\r\n        {name: 'Vitya', id: '3'},\r\n        {name: 'Dyadya', id: '4'}\r\n      ],\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_MESSAGE: {\r\n            let newMessage = {\r\n                id: 8,\r\n                message: action.message\r\n              };\r\n              \r\n             return {\r\n                  ...state,\r\n                  messagesData: [...state.messagesData, newMessage],\r\n                };\r\n            }\r\n        default:\r\n            return state;\r\n    }    \r\n}\r\n\r\nexport const addMessageActionCreator = (message) => ({\r\n    type: ADD_MESSAGE,\r\n    message\r\n});\r\n\r\nexport default dialogsReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"news\":\"News_news__9fnZw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__3y7zd\"};","module.exports = __webpack_public_path__ + \"static/media/preload.087f5d2f.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__1O7vR\",\"item\":\"Navbar_item__3idXD\",\"activeLinkBagda\":\"Navbar_activeLinkBagda__1xvr5\",\"friends\":\"Navbar_friends__fCKyD\",\"friend\":\"Navbar_friend__1KEAy\",\"users\":\"Navbar_users__rEA1W\"};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport classes from './Navbar.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nconst Navbar = (props) => {\r\n  \r\n    return (\r\n        <nav className={classes.nav}>\r\n            <div className={classes.item}>\r\n                <NavLink to='/profile' activeClassName={classes.activeLinkBagda}>Profile</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/dialogs' activeClassName={classes.activeLinkBagda}>Messages</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/news' activeClassName={classes.activeLinkBagda}>News</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/music'>Music</NavLink>\r\n            </div>\r\n            <div className={classes.item}>\r\n                <NavLink to='/settings'>Settings</NavLink>\r\n            </div>\r\n            <div className={classes.item + ' ' + classes.users }>\r\n                <NavLink to='/users'>List of Users</NavLink>\r\n            </div>\r\n            <div className={classes.friends}>\r\n                Friends: \r\n            </div>\r\n        </nav>\r\n    )\r\n} \r\n\r\nexport default Navbar;","import React from 'react';\r\nimport classes from './News.module.css';\r\n\r\nconst News = () => {\r\n    return (\r\n        <div className={classes.news}>This is News</div>\r\n    );\r\n}\r\n\r\nexport default News;","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return { ...u, ...newObjProps }\r\n        }\r\n        return u;\r\n    })\r\n}","import { usersAPI } from '../api/api';\r\nimport { updateObjectInArray } from '../utils/object-helpers';\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET_USERS';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case FOLLOW:\r\n\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userID, 'id', {followed: true})\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userID, 'id', {followed: false})\r\n            }\r\n        case SET_USERS:\r\n            return { ...state, users: action.users }\r\n        case SET_CURRENT_PAGE:\r\n            return { ...state, currentPage: action.currentPage }\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return { ...state, totalUsersCount: action.count }\r\n        case TOGGLE_IS_FETCHING:\r\n            return { ...state, isFetching: action.isFetching }\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n\r\n            }\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nexport const followSuccess = (userID) => ({\r\n    type: FOLLOW,\r\n    userID: userID\r\n});\r\nexport const unfollowSuccess = (userID) => ({\r\n    type: UNFOLLOW,\r\n    userID: userID\r\n});\r\nexport const setUsers = (users) => ({\r\n    type: SET_USERS,\r\n    users\r\n})\r\nexport const setCurrentPage = (currentPage) => ({\r\n    type: SET_CURRENT_PAGE,\r\n    currentPage\r\n})\r\nexport const setTotalUsersCount = (totalNumber) => ({\r\n    type: SET_TOTAL_USERS_COUNT,\r\n    count: totalNumber\r\n})\r\nexport const toggleIsFetching = (isFetching) => ({\r\n    type: TOGGLE_IS_FETCHING,\r\n    isFetching\r\n})\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({\r\n    type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n    isFetching,\r\n    userId\r\n})\r\n\r\nexport const requestUsers = (page, pageSize) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleIsFetching(true));\r\n        dispatch(setCurrentPage(page));\r\n\r\n        let data = await usersAPI.getUsers(page, pageSize)\r\n        dispatch(toggleIsFetching(false));\r\n        dispatch(setUsers(data.items));\r\n        dispatch(setTotalUsersCount(data.totalCount));\r\n    }\r\n}\r\n\r\n\r\n// helper \r\n\r\nconst followUnfollowFlow = (userId, apiMethod, actionCreator) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleFollowingProgress(true, userId))\r\n        let data = await apiMethod(userId);\r\n        if (data.resultCode === 0) {\r\n            dispatch(actionCreator(userId));\r\n        }\r\n        dispatch(toggleFollowingProgress(false, userId))\r\n    }\r\n}\r\n\r\nexport const unfollow = (userId) => {\r\n    return followUnfollowFlow(userId, usersAPI.deleteUsers.bind(usersAPI), unfollowSuccess);\r\n}\r\n\r\nexport const follow = (userId) => {\r\n    return followUnfollowFlow(userId, usersAPI.followUsers.bind(usersAPI), followSuccess);\r\n}\r\n\r\n\r\nexport default usersReducer;","import React, { useState } from 'react';\r\nimport styles from './Paginator.module.css';\r\nimport cn from 'classnames';\r\n\r\nexport const Paginator = ({ currentPage, onPageChanged, totalItemsCount, pageSize, portionSize = 10 }) => {\r\n    let pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n    //console.log(`totalItemsCount = ${totalItemsCount}, pageSize = ${pageSize}, pagesCount = ${pagesCount}`)\r\n    let portionCount = Math.ceil(pagesCount / portionSize);\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n\r\n    return (<div className={styles.paginator} >\r\n        {\r\n            portionNumber > 1 && <button onClick={() => { setPortionNumber(portionNumber - 1) }}> PREV </button>\r\n        }\r\n        {\r\n            pages.filter(p => p >= leftPortionPageNumber && p\r\n                <= rightPortionPageNumber)\r\n                .map(p => <span key={p}\r\n                    className={cn({\r\n                        [styles.selectedItems]: currentPage === p,\r\n                        [styles.pageNumber]: currentPage !== p\r\n                    })}\r\n                    onClick={(e) => {\r\n                        onPageChanged(p)\r\n                    }}>{p}</span>)\r\n        }\r\n        {\r\n            portionCount > portionNumber && <button onClick={() => setPortionNumber(portionNumber + 1)}>NEXT</button>\r\n        }\r\n    </div>)\r\n}","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport styles from './Users.module.css';\r\nimport userPhoto from '../../assets/images/default-icon.png';\r\n\r\nexport const User = ({user, followingInProgress, follow, unfollow}) => {\r\n    return ( <div >\r\n        <span>\r\n            <div>\r\n                <NavLink to={'/profile/' + user.id} >\r\n                    <img alt={user.id} className={styles.userPhoto} src={user.photos.small != null ? user.photos : userPhoto} />\r\n                </NavLink>\r\n            </div>\r\n            <div>\r\n                {user.followed\r\n                    ? <button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {\r\n                        unfollow(user.id);\r\n\r\n                    }}>Unfollow</button>\r\n                    : <button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {\r\n                        follow(user.id)\r\n                    }}>Follow</button>}\r\n            </div>\r\n        </span>\r\n        <span>\r\n            <span>\r\n                <div>{user.name}</div><div>{user.status}</div>\r\n            </span>\r\n            <span>\r\n                {/* <div>{user.location.country}</div> */}\r\n                {/* <div>{user.location.city}</div> */}\r\n            </span>\r\n        </span>\r\n    </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Paginator } from '../common/Paginator/Paginator';\r\nimport { User } from './User';\r\nlet Users = ({ currentPage, onPageChanged, totalUsersCount, pageSize, followingInProgress, follow, unfollow, users, ...props }) => {\r\n\r\n    return <div>\r\n\r\n        <Paginator currentPage={currentPage} onPageChanged={onPageChanged} totalItemsCount={totalUsersCount}\r\n            pageSize={pageSize} />\r\n\r\n        {\r\n            users.map(u => <User user={u}\r\n                key={u.id}\r\n                followingInProgress={followingInProgress}\r\n                unfollow={unfollow}\r\n                follow={follow} />)\r\n        }\r\n    </div>\r\n}\r\nexport default Users;","import { createSelector } from \"reselect\"\r\n\r\nexport const getUsersSelector = (state) => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(u => true);\r\n})\r\n\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress\r\n}\r\n","import { connect } from 'react-redux';\r\nimport {  setUsers, setCurrentPage, setTotalUsersCount, toggleIsFetching } from '../../redux/users-reducer';\r\nimport React from 'react';\r\nimport Users from './Users';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport {follow, unfollow, requestUsers} from '../../redux/users-reducer';\r\nimport { compose } from '../../../../../../AppData/Local/Microsoft/TypeScript/3.6/node_modules/redux';\r\nimport { getUsers, getPageSize, getTotalUsersCount, getCurrentPage, getIsFetching, getFollowingInProgress } from '../../redux/users-selectors';\r\n\r\nclass UsersContainer extends React.Component {\r\n    componentDidMount() {\r\n        let {currentPage, pageSize} = this.props;\r\n        this.props.requestUsers(currentPage, pageSize);\r\n\r\n    }\r\n    onPageChanged = (pageNumber) => {\r\n        const {pageSize} = this.props;\r\n        this.props.requestUsers(pageNumber, pageSize);\r\n    }\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ?\r\n                <Preloader />\r\n                : null}\r\n            <Users\r\n                currentPage={this.props.currentPage}\r\n                users={this.props.users}\r\n                followSuccess={this.props.followSuccess}\r\n                unfollowSuccess={this.props.unfollowSuccess}\r\n                onPageChanged={this.onPageChanged}\r\n                totalUsersCount={this.props.totalUsersCount}\r\n                pageSize={this.props.pageSize}\r\n                follow={this.props.follow}\r\n                unfollow={this.props.unfollow}\r\n                followingInProgress={this.props.followingInProgress}\r\n            />\r\n        </>\r\n    }\r\n}\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\n// let mapStateToProps = (state) => {\r\n//     return {\r\n//         users: state.usersPage.users,\r\n//         pageSize: state.usersPage.pageSize,\r\n//         totalUsersCount: state.usersPage.totalUsersCount,\r\n//         currentPage: state.usersPage.currentPage,\r\n//         isFetching: state.usersPage.isFetching,\r\n//         followingInProgress: state.usersPage.followingInProgress\r\n//     }\r\n// }\r\n// let mapDispatchToProps = (dispatch) => {\r\n//     return {\r\n//         follow: (userID) => {\r\n//             dispatch(followAC(userID))\r\n//         },\r\n//         unfollow: (userID) => {\r\n//             dispatch(unfollowAC(userID))\r\n//         },\r\n//         setUsers: (users) => {\r\n//             dispatch(setUsersAC(users))\r\n//         },\r\n//         setCurrentPage: (number) => {\r\n//             dispatch(setCurrentPageAC(number))\r\n//         },\r\n//         setTotalUsersCount: (totalCount) => {\r\n//             dispatch(setTotalUsersCountAC(totalCount))\r\n//         },\r\n//         toggleIsFetching: (isFetching) => {\r\n//             dispatch(toggleIsFetchingAC(isFetching))\r\n//         }\r\n//     }\r\n// }\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {\r\n        follow,\r\n        unfollow,\r\n        setUsers,\r\n        setCurrentPage,\r\n        setTotalUsersCount,\r\n        toggleIsFetching,\r\n        requestUsers\r\n    }),\r\n    withAuthRedirect\r\n)(UsersContainer);\r\n","import React from 'react';\r\nimport classes from './Header.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\n\r\nconst Header = (props) => {\r\n    return <header className={classes.header}>\r\n        <img src='https://store-fit.nethouse.ru/static/img/0000/0008/4990/84990387.39nh48juwd.W215.png' alt='test' />\r\n        { props.isAuth ? <div>{props.login} ---- <button onClick={props.logout}>Logout</button></div>  \r\n        : <div className={classes.login} >\r\n            <NavLink to={'/login'} >Login</NavLink>\r\n        </div> }\r\n       \r\n    </header>\r\n}\r\n\r\nexport default Header;","import { authAPI, securityAPI } from \"../api/api\";\r\nimport { stopSubmit } from 'redux-form';\r\nconst SET_USER_DATA = 'social-max/auth/SET_USER_DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'GET_CAPTCHA_URL_SUCCESS';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (userId, email, login, isAuth) => ({\r\n    type: SET_USER_DATA,\r\n    payload: { userId, email, login, isAuth }\r\n})\r\n\r\nexport const getAuthUserData = () => {\r\n    return async (dispatch) => {\r\n        let response = await authAPI.auth()\r\n        if (response.data.resultCode === 0) {\r\n            let { id, login, email } = response.data.data;\r\n            dispatch(setAuthUserData(id, email, login, true));\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const login = (email, password, rememberMe = false, captcha = null) => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe, captcha);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData())\r\n    }\r\n    else {\r\n        if (response.data.resultCode === 10) {\r\n            dispatch(getCaptchaUrl());\r\n        }\r\n        let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error';\r\n        dispatch(stopSubmit('login', { _error: message }))\r\n    }\r\n}\r\nexport const logout = () => async (dispatch) => {\r\n    let response = await authAPI.logout()\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n    let response = await securityAPI.getCaptchaUrl();\r\n    const captchaUrl = response.data.url;\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\nexport const getCaptchaUrlSuccess = (captchaUrl) => ({\r\n    type: GET_CAPTCHA_URL_SUCCESS,\r\n    payload: { captchaUrl }\r\n})\r\nexport default authReducer;","import React from 'react';\r\nimport Header from './Header';\r\nimport {connect} from 'react-redux';\r\nimport {getAuthUserData} from '../../redux/auth-reducer';\r\nimport {logout} from '../../redux/auth-reducer';\r\n\r\nclass HeaderContainer extends React.Component {\r\n    componentDidMount() {\r\n        this.props.getAuthUserData();\r\n    }\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n})\r\n\r\nexport default connect(mapStateToProps, {getAuthUserData, logout})(HeaderContainer);","import React from 'react';\r\nimport { reduxForm } from 'redux-form';\r\nimport { Input, createField } from '../common/FormControls/FormControls';\r\nimport { requiredField, maxLengthCreator } from '../../utils/validators/validators';\r\nimport { login } from '../../redux/auth-reducer';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport styles from '../common/FormControls/FormControls.module.css';\r\n\r\nconst Login = (props) => {\r\n\r\n    const onSubmit = (formData) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha);\r\n    }\r\n    if (props.isAuth) {\r\n        return <Redirect to={\"/profile\"} />\r\n    }\r\n    return (\r\n\r\n        <div>\r\n            <h1>Login</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl}/>\r\n        </div>\r\n    );\r\n}\r\nlet maxLength30 = maxLengthCreator(30);\r\nconst LoginForm = ({ error, handleSubmit, captchaUrl }) => {\r\n    return (<form onSubmit={handleSubmit}>\r\n        {createField('username', 'email', [requiredField, maxLength30], Input, {}, '')}\r\n        {createField('password', 'password', [requiredField, maxLength30], Input, { type: 'password' }, '')}\r\n        {createField('', 'rememberMe', [], 'input', { type: 'checkbox' }, '')}\r\n        <div>\r\n            <button>Submit</button>\r\n        </div>\r\n        \r\n        {captchaUrl && <img src={captchaUrl} alt='captcha'/>}\r\n        {captchaUrl && createField('Enter symbols from image', 'captcha', [requiredField], Input, {} )}\r\n\r\n        {error && <div className={styles.commonError}>{error}</div>}\r\n    </form>)\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({\r\n    form: 'login'\r\n})(LoginForm)\r\n\r\nlet mapStateToProps = (state) => ({\r\n    captchaUrl: state.auth.captchaUrl,\r\n    isAuth: state.auth.isAuth\r\n})\r\nexport default connect(mapStateToProps, { login })(Login);","import { getAuthUserData } from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\nlet initialState = {\r\n  initialized: false\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS: \r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nexport const initializedSuccess = () => ({\r\n    type: INITIALIZED_SUCCESS,\r\n})\r\n\r\nexport const initializedApp = () => {\r\n    return (dispatch) => {\r\n        let promise = dispatch(getAuthUserData());\r\n        Promise.all([promise]).then( () => { dispatch( initializedSuccess() ) })\r\n    }\r\n}\r\nexport default appReducer;","let initialState = {\r\n    friendsList: [\r\n        {name: 'Lilya', id: '1'},\r\n        {name: 'Nastya', id: '2'},\r\n        {name: 'Liza', id: '3'},\r\n    ]\r\n};\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\r\n    \r\n    return state;\r\n}\r\nexport default sidebarReducer;","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form';\r\nimport appReducer from './app-reducer';\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n})\r\n//let store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers,  composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nwindow.__store__ = store;\r\nexport default store;","import React from 'react';\r\nimport Preloader from '../components/common/Preloader/Preloader';\r\n\r\nexport const withSuspense = (Component) => {\r\n    return (props) => {\r\n        return <React.Suspense fallback={<Preloader />} >\r\n            <Component {...props} />\r\n        </React.Suspense>\r\n    }\r\n}","import React from 'react'; // there was wrong import (Switch, Redirect)\r\nimport './App.css';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport News from './components/News/News';\r\nimport UsersContainer from './components/Users/UsersContainer';\r\n\r\n//import DialogsContainer from './components/Dialogs/DialogsContainer';\r\n//import ProfileContainer from './components/Profile/ProfileContainer';\r\n\r\nimport HeaderContainer from './components/Header/HeaderContainer';\r\nimport LoginPage from './components/Login/Login';\r\nimport { initializedApp } from './redux/app-reducer';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from '../../../../AppData/Local/Microsoft/TypeScript/3.6/node_modules/redux';\r\nimport Preloader from './components/common/Preloader/Preloader';\r\nimport store from './redux/redux-store';\r\nimport { HashRouter } from 'react-router-dom';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport { withSuspense } from './hoc/withSuspense';\r\n\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'))\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'))\r\n\r\nclass App extends React.Component {\r\n  // DComponent = () =>\r\n  //   <React.Suspense fallback={<div>Loading... for Bagda Max</div>}>\r\n  //     <DialogsContainer store={this.props.store} />\r\n  //   </React.Suspense>\r\n  // DProfile = () =>\r\n  //   <React.Suspense fallback={<div>Loading... for Bagda Max</div>}>\r\n  //     <ProfileContainer store={this.props.store} />\r\n  //   </React.Suspense>\r\n\r\n  componentDidMount() {\r\n    this.props.initializedApp();\r\n\r\n    // catch some error\r\n    window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors);\r\n  }\r\n\r\n  catchAllUnhandledErrors = (promiseRejectionEvent) => {\r\n    alert(\"Some error occured\");\r\n    console.log(promiseRejectionEvent);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // i need remove the subscribe\r\n    window.removeEventListener('unhandledrejection', this.catchAllUnhandledErrors);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.initialized) {\r\n      return <Preloader />\r\n    }\r\n\r\n    return (\r\n      <div className=\"app-wrapper\">\r\n        <HeaderContainer />\r\n        <Navbar />\r\n        <div className='app-wrapper-content'>\r\n          <Switch>\r\n            <Route exact path='/' render={() => <Redirect to={'/profile'} />} />\r\n            <Route render={withSuspense(DialogsContainer)} path='/dialogs' />\r\n            <Route render={withSuspense(ProfileContainer)} path='/profile/:userId?' />\r\n            <Route render={() => <UsersContainer />} path='/users' />\r\n            <Route component={News} path='/news' />\r\n            <Route path='/login' render={() => <LoginPage />} />\r\n            <Route path='*' render={() => <div> 404 not found</div>} />\r\n          </Switch>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\nlet mapStateToProps = (state) => ({\r\n  initialized: state.app.initialized\r\n})\r\n\r\nlet AppContainer = compose( // there was withRouter\r\n  connect(mapStateToProps, { initializedApp }))(App);\r\n\r\nlet SamuraiJSApp = (props) => {\r\n  return (\r\n    <HashRouter>\r\n      <Provider store={store}>\r\n        <AppContainer />\r\n      </Provider>\r\n    </HashRouter>\r\n  )\r\n}\r\n\r\nexport default SamuraiJSApp;\r\n","\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport SamuraiJSApp from './App';\r\n\r\n\r\n  ReactDOM.render(\r\n    <SamuraiJSApp/>,\r\n     document.getElementById('root'));\r\n\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React from 'react';\r\nimport st from './FormControls.module.css';\r\nimport {Field} from 'redux-form';\r\n\r\nconst FormControl = ({ input, meta:{touched, error}, child, ...props }) => {\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={st.redBorder + ' ' + hasError ? st.redText : \"\"}>\r\n            {props.children}\r\n            {hasError && <span>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n    const { input, meta, child, ...restProps } = props;\r\n    return <FormControl {...props}><textarea {...input} {...restProps}></textarea></FormControl>\r\n}\r\n\r\n\r\nexport const Input = (props) => {\r\n    const { input, meta, child, ...restProps } = props;\r\n    return <FormControl {...props}><input {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const createField = (placeholder, name, validators, component, props = {}, text = '') => {\r\n    return <div><Field placeholder={placeholder} component={component}\r\n        name={name} validate={validators} {...props} /> {text}\r\n    </div>\r\n}","import React from 'react';\r\nimport preloader from '../../../assets/images/preload.gif';\r\n\r\nlet Preloader = () => {\r\n   return <div>\r\n        <img src={preloader} alt='preloader'/>\r\n    </div>\r\n}\r\n\r\nexport default Preloader;","export const requiredField = value => {\r\n    if (value) return undefined;\r\n    return \"Field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = maxLength => (value) => {\r\n    if (value.length > maxLength) {\r\n        return `Maximum length is ${maxLength} symbols`;\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"redBorder\":\"FormControls_redBorder__5dIrA\",\"redText\":\"FormControls_redText__30y5z\",\"commonError\":\"FormControls_commonError__gsymU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedItems\":\"Paginator_selectedItems__2Snhm\",\"paginator\":\"Paginator_paginator__3C3hG\",\"pageNumber\":\"Paginator_pageNumber__bsztr\",\"selectedPage\":\"Paginator_selectedPage__14dh3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2uIBC\",\"login\":\"Header_login__NY4UT\"};","import { profileAPI } from \"../api/api\";\r\nimport { stopSubmit } from 'redux-form';\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst DELETE_POST = 'DELETE_POST';\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE_PHOTO_SUCCESS';\r\n\r\nlet initialState = {\r\n    postsData: [\r\n        { id: '1', message: 'Hello Max', likesCount: '11' },\r\n        { id: '2', message: 'You are very strong', likesCount: '4' },\r\n        { id: '3', message: 'Hey', likesCount: '99' },\r\n        { id: '4', message: 'Hey', likesCount: '34' },\r\n        { id: '5', message: 'Hey', likesCount: '66' },\r\n        { id: '6', message: 'Hey', likesCount: '23' }\r\n    ],\r\n    profile: null,\r\n    status: ''\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            let newPost = {\r\n                id: 5,\r\n                message: action.value,\r\n                likesCount: 0\r\n            };\r\n            return {\r\n                ...state,\r\n                postsData: [...state.postsData, newPost],\r\n\r\n            };\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return { ...state, profile: { ...state.profile, photos: action.photos } }\r\n        // TDD\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.filter(p => p.id !== action.deleteId)\r\n            }\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nexport const addPostActionCreator = (value) => ({\r\n    type: ADD_POST,\r\n    value\r\n});\r\nexport const setUserProfile = (profile) => ({\r\n    type: SET_USER_PROFILE,\r\n    profile\r\n})\r\n\r\nexport const getProfile = (userId) => {\r\n    return async (dispatch) => {\r\n        let data = await profileAPI.getProfile(userId);;\r\n        dispatch(setUserProfile(data));\r\n    }\r\n}\r\n\r\nexport const setStatus = (status) => ({\r\n    type: SET_STATUS,\r\n    status\r\n})\r\n\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    let data = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(data))\r\n}\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    try {\r\n        let data = await profileAPI.updateStatus(status)\r\n        if (data.resultCode === 0) {\r\n            dispatch(setStatus(status))\r\n        }\r\n    }\r\n    catch (error) {\r\n        console.log('some error' + error + '---------')\r\n    }\r\n\r\n}\r\n\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    let response = await profileAPI.savePhoto(file);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos));\r\n    }\r\n}\r\nexport const savePhotoSuccess = (photos) => ({\r\n    type: SAVE_PHOTO_SUCCESS,\r\n    photos\r\n})\r\n\r\nexport const saveProfile = (profile) =>\r\n    async (dispatch, getState) => {\r\n        const userId = getState().auth.userId;\r\n        let response = await profileAPI.saveProfile(profile);\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(getProfile(userId));\r\n        }\r\n        else {\r\n            dispatch(stopSubmit('edit-profile', { _error: response.data.messages[0] }));\r\n            return Promise.reject(response.data.messages[0]);\r\n        }\r\n    }\r\n\r\n\r\n// for TDD\r\nexport const deletePost = (deleteId) => ({\r\n    type: DELETE_POST,\r\n    deleteId\r\n})\r\n\r\nexport default profileReducer;"],"sourceRoot":""}